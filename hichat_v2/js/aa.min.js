var elchat=$(".chat-content");$.smartScroll=function(a,c){if(!c||a.data("isBindScroll")){return}var d;var b={posY:0,maxscroll:0};a.on({touchstart:function(){var f=event.touches[0]||event;var g=$(event.target);if(!g.length){return}var e;if(g.is(c)){e=g}else{if((e=g.parents(c)).length==0){e=null}}if(!e){return}b.elScroll=e;b.posY=f.pageY;b.scrollY=e.scrollTop();b.maxscroll=e[0].scrollHeight-e[0].clientHeight},touchmove:function(){if(b.maxscroll<=0||d){event.preventDefault()}var e=b.elScroll;var h=e.scrollTop();var f=event.touches[0]||event;var g=f.pageY-b.posY;if(d){e.scrollTop(b.scrollY-g);e.trigger("scroll");return}if(g>0&&h==0){event.preventDefault();return}if(g<0&&(h+1>=b.maxscroll)){event.preventDefault();return}},touchend:function(){b.maxscroll=0}});a.data("isBindScroll",false)};$.smartScroll(elchat,".message-content");$.smartScroll($(".right-sidebar-content"),".chat-user-list");$.smartScroll($(".in-online-user"),".online-user-list");$.smartScroll($(".select"),".duration-list");$.smartScroll($(".cash-in-message"),".cash-in-message-list");$.smartScroll($(".spend-message"),".spend-message-list");$.smartScroll($(".recharge-record"),".recharge-record-list-wrap");$.smartScroll($(".my-red-packet"),".my-rp-detail-wrap");$.smartScroll($(".red-packet-detail"),".red-packet-record");$.smartScroll($(".recevice-gift"),".gift-information");$(".user-avatar").click(function(){$(this).parents(".chat-content").removeClass("page-from-left-to-content").addClass("page-from-center-to-left");$(".user-data").removeClass("hide").removeClass("page-from-center-to-right").addClass("page-from-right-to-center")});$(".user-data").find(".icon-houtui").click(function(){$(this).parents(".user-data").removeClass("page-from-right-to-center").addClass("page-from-center-to-right");$(".chat-content").removeClass("page-from-center-to-left").addClass("page-from-left-to-content");setTimeout(function(){$(".user-data").addClass("hide")},400)});$("#btn").click(function(){var a=$("#text").val();var c=new Date();var f=c.getHours()+":"+c.getMinutes()+":"+c.getSeconds();var e="<div class='message-receive flex'><div class='user-avatar'></div><div class='user-name'>小怪兽</div><div class='message-text'>"+a+"</div></div>";if(a==""){return false}$(".in-message-content").append(e);var d=$(".message-content").height();var b=$(".in-message-content").outerHeight(true);console.log(d);console.log(b);$(".message-content").scrollTop(b-d);$("#text").val("")});$(".toolbar").find(".icon-jia").click(function(){$(".toolbar-list").toggleClass("hide")});$("body").on("touchstart",function(a){startX=a.originalEvent.changedTouches[0].pageX,startY=a.originalEvent.changedTouches[0].pageY});$("body").on("touchmove",function(a){moveEndX=a.originalEvent.changedTouches[0].pageX,moveEndY=a.originalEvent.changedTouches[0].pageY,X=moveEndX-startX,Y=moveEndY-startY;if(X>350){$(".cash-in-record").removeClass("page-from-right-to-center").addClass("page-from-center-to-right");$(".chat-content").removeClass("page-from-center-to-left").addClass("page-from-left-to-content");setTimeout(function(){$(".cash-in-record").addClass("hide")},400)}else{if(X<-350){$(".chat-content").removeClass("page-from-left-to-content").addClass("page-from-center-to-left");$(".cash-in-record").removeClass("hide").removeClass("page-from-center-to-right").addClass("page-from-right-to-center")}}});$(".icon-shezhi").click(function(){$(".left-sidebar-wrap").removeClass("hide");$(this).addClass("ico-setting");$(".left-sidebar-content").removeClass("CenterToLeft").addClass("LeftToCenter")});$(".left-sidebar-wrap").click(function(a){if(a.target.className=="left-sidebar-wrap"){$(".left-sidebar-content").removeClass("LeftToCenter").addClass("CenterToLeft");setTimeout(function(){$(".left-sidebar-wrap").addClass("hide")},400);$(".icon-shezhi").removeClass("ico-setting")}});$(".show-rank-bar").find(".icon-xiayigeunext").click(function(){$(".right-sidebar-wrap").removeClass("hide");$(".right-sidebar-content").removeClass("CenterToRight").addClass("RightToCenter")});$(".right-sidebar-wrap").click(function(a){if(a.target.className=="right-sidebar-wrap"){$(".right-sidebar-content").removeClass("RightToCenter").addClass("CenterToRight");setTimeout(function(){$(".right-sidebar-wrap").addClass("hide")},400)}});var duration_inner=$(".duration-text").text();$(".duration-text").click(function(){$(".duration-list").toggleClass("hide")});$(".select").find(".duration-list li").click(function(){var a=$(this).text();$(".duration-text").text(a).css("color","#000");$(this).parent().addClass("hide")});$(".send-pa-screen").click(function(a){if(a.target.className!="duration-text"){$(".duration-list").addClass("hide")}});$(".icon-quanping").click(function(){$(".send-pa-screen").removeClass("hide")});$(".send-pa-screen").find(".icon-guanbi").click(function(){$(this).parents(".send-pa-screen").addClass("hide")});var img_storage;$(".message-receive").find("img").click(function(){img_storage=$(this).attr("src");$("body").append('<div class="photo-browser flex fixed"><img src="'+img_storage+'" alt=""></div>');$(".photo-browser").addClass("photo-browser-in")});$(".message-send").find("img").click(function(){img_storage=$(this).attr("src");$("body").append('<div class="photo-browser flex fixed"><img src="'+img_storage+'" alt=""></div>');$(".photo-browser").addClass("photo-browser-in")});$("body").delegate(".photo-browser","touchend",function(){$(".photo-browser").addClass("photo-browser-out");setTimeout(function(){$(".photo-browser").remove()},400)});var flag=true;function doSwiper(){var a=new Swiper(".swiper-container",{direction:"horizontal",loop:true,pagination:".swiper-pagination"})}$(".user-data").find(".icon-buchongiconsvg05").click(function(){$(".gift-list-wrap").removeClass("hide").addClass("bottomToTop");if(flag){doSwiper()}});$(".gift-list-wrap").click(function(a){if(a.target.className=="gift-list-wrap"){$(this).addClass("topToBottom");flag=!flag}});